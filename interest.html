<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="img/icon/logo-small-64.png" type="image/x-icon" />
    <title>Kosumi Go | Interest Form</title>
    <link rel="stylesheet" href="css/common.css" />
    <link rel="stylesheet" href="css/interest.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  </head>
  <body>
    <div id="page-content">
      <div class="page-title accented-text accented-style">Interest Form</div>
      <form action="https://docs.google.com/forms/u/0/d/e/1FAIpQLSfsxEFCrgY21AYzPpxk8nUVDkoysmGCOSkXXYECYrUPr59eNg/formResponse" method="POST">
        <div class="input-pair" id="info-box">
          <div id="info-box-contents">
            <div id="form-title">Online Kosumi Go School (KGS) New Student Interest Form</div>
            <div id="form-description">
              We are high school student-run non-profit that provides accessible Go lessons (taught by students who has had impressive results in world class tournaments), and strives to share the game and culture with everyone in the country! This means that we are trying to expand online, and we are in need of teachers and volunteers. Profits will go towards charity! <br /><br />
              We appreciate your interest in Kosumi Go School, this is a non binding form that will add you to our elist for more information about our school.
              <br /><br />
              KGS holds weekly Go classes taught by high level Go players. Price: Free trials offered ($15/hr after trial)
              <br /><br />
              We will get back to you soon after this form is submitted, contact us for any questions!
              <br />
              You can email us at <a href="mailto:kosumigo@gmail.com">kosumigo@gmail.com</a>
            </div>
            <div id="form-info-and-key">* Indicates Required Questions</div>
          </div>
        </div>
        <div class="input-pair" data-required>
          <label for="name">Name</label>
          <input type="text" class="short" id="name" />
          <div class="input-border"></div>
        </div>
        <div class="input-pair" data-required>
          <label for="email">Email</label>
          <input type="text" data-role="email" class="short" id="email" />
          <div class="input-border"></div>
        </div>
        <div class="input-pair">
          <label for="age">Age Group</label>
          <div class="radio-group">
            <input type="radio" name="interest-source" id="age-18plus" />
            <label for="age-18plus">
              <span class="radio"></span>
              <span class="radio-label">18 or above</span>
            </label>
          </div>
          <div class="radio-group">
            <input type="radio" name="interest-source" id="age-under18" />
            <label for="age-under18">
              <span class="radio"></span>
              <span class="radio-label"
                ><span class="radio-label-text">Under 18:&nbsp;</span>
                <div>
                  <input type="number" id="age" min="5" max="17" id="under18age" />
                  <div class="input-border"></div>
                </div>
              </span>
            </label>
          </div>
        </div>
        <div class="input-pair" data-required>
          <label for="experience">Previous Go Experience</label>
          <div class="radio-group">
            <input type="radio" name="experience-level" id="label1" />
            <label for="label1">
              <span class="radio"></span>
              <span class="radio-label">Beginner (never played before)</span>
            </label>
          </div>
          <div class="radio-group">
            <input type="radio" name="experience-level" id="label2" />
            <label for="label2">
              <span class="radio"></span>
              <span class="radio-label">Little (know the rules to Go)</span>
            </label>
          </div>
          <div class="radio-group">
            <input type="radio" name="experience-level" id="label3" />
            <label for="label3">
              <span class="radio"></span>
              <span class="radio-label">More (played a few games)</span>
            </label>
          </div>
          <div class="radio-group">
            <input type="radio" name="experience-level" id="label4" />
            <label for="label4">
              <span class="radio"></span>
              <span class="radio-label">Medium (played many games, ready to learn more advanced topics)</span>
            </label>
          </div>
        </div>
        <div class="input-pair">
          <label for="class-slot">Which time slot do you plan to attend?</label>
          <div class="radio-group">
            <input type="radio" name="class-slot" id="beg1" />
            <label for="beg1">
              <span class="radio"></span>
              <span class="radio-label">Beginner 1 (Sunday 10-11 AM PST)</span>
            </label>
          </div>
          <div class="radio-group">
            <input type="radio" name="class-slot" id="beg2" />
            <label for="beg2">
              <span class="radio"></span>
              <span class="radio-label">Beginner 2 (Saturday 3-4 PM PST)</span>
            </label>
          </div>
        </div>
        <div class="input-pair">
          <label for="time-pref">Do you have another preferred time (we may consider adding popular suggestions)</label>
          <input type="text" class="short" id="time-pref" />
          <div class="input-border"></div>
        </div>
        <div class="input-pair">
          <label for="referrer">If someone referred you, who?</label>
          <span class="subtitle">Once referred, you must attend 1 paid lesson for your referrer to get their free lesson</span>
          <input type="text" class="short" id="referrer" />
          <div class="input-border"></div>
        </div>
        <div class="input-pair" data-required>
          <label for="interest-source">Where did you hear about us?</label>
          <div class="radio-group">
            <input type="radio" name="interest-source" id="source-wechat" />
            <label for="source-wechat">
              <span class="radio"></span>
              <span class="radio-label">Wechat</span>
            </label>
          </div>
          <div class="radio-group">
            <input type="radio" name="interest-source" id="source-flyer" />
            <label for="source-flyer">
              <span class="radio"></span>
              <span class="radio-label">Flyers</span>
            </label>
          </div>
          <div class="radio-group">
            <input type="radio" name="interest-source" id="source-friendfamily" />
            <label for="source-friendfamily">
              <span class="radio"></span>
              <span class="radio-label">Friends / Family</span>
            </label>
          </div>
          <div class="radio-group">
            <input type="radio" name="interest-source" id="source-school" />
            <label for="source-school">
              <span class="radio"></span>
              <span class="radio-label">School</span>
            </label>
          </div>
          <div class="radio-group">
            <input type="radio" name="interest-source" id="source-other" />
            <label for="source-other">
              <span class="radio"></span>
              <span class="radio-label"
                ><span class="radio-label-text">Somewhere else:&nbsp;</span>
                <div>
                  <input type="text" class="short" id="interest-source-other" />
                  <div class="input-border"></div>
                </div>
              </span>
            </label>
          </div>
        </div>
        <div class="input-pair">
          <label for="questions">Any questions?</label>
          <input type="text" id="questions" />
          <div class="input-border"></div>
        </div>
        <input type="submit" value="Submit" disabled />
      </form>
    </div>
  </body>
  <script>
    //tool to validate [data-role="email"] inputs for correctness and correspondingly update the closest ".input-pair" with a "valid" or "invalid" class

    $("[data-role='email']").on("input change", function () {
      // use a regular expression to check if the input is a valid email
      let regex = /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/;
      if ($(this).val() && regex.test($(this).val())) {
        $(this).closest(".input-pair").removeClass("invalid").addClass("valid");
      } else {
        $(this).closest(".input-pair").removeClass("valid").addClass("invalid");
      }
    });

    // when an input changes, check if all required inputs are valid, and if they are enable the submit button
    $("[data-required]").on("input change", function () {
      let all_valid = true;
      $("[data-required]").each(function () {
        if ($(this).hasClass("invalid")) {
          all_valid = false;
        }
        // if the input is empty, it is invalid, or if it is a radio group and none of the radios are checked
        else if (!$(this).find("input").val() || ($(this).find("input[type='radio']").length && !$(this).find("input[type='radio']:checked").length)) {
          all_valid = false;
        }
        if (!$(this).find("input").val()) {
          all_valid = false;
        }
      });
      if (all_valid) {
        $("input[type='submit']").prop("disabled", false);
      } else {
        $("input[type='submit']").prop("disabled", true);
      }
    });
  </script>
</html>
